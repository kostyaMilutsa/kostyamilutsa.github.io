{"ast":null,"code":"import _slicedToArray from\"E:/Maklakov/mulitsa/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useMemo,useState}from\"react\";import{loginUser}from\"../api/user\";export default function useAuth(){var _useState=useState(function(){var userString=localStorage.getItem(\"user\");if(userString){return JSON.parse(userString);}return null;}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var value=useMemo(function(){return{user:user,setNewUser:function setNewUser(email,password){return loginUser(email,password).then(function(newUser){setUser(newUser);localStorage.setItem(\"user\",JSON.stringify(newUser));}).catch(function(){setUser(null);localStorage.removeItem(\"user\");});},deleteUser:function deleteUser(){setUser(null);localStorage.removeItem(\"user\");}};},[user]);return value;}","map":{"version":3,"names":["useMemo","useState","loginUser","useAuth","userString","localStorage","getItem","JSON","parse","user","setUser","value","setNewUser","email","password","then","newUser","setItem","stringify","catch","removeItem","deleteUser"],"sources":["E:/Maklakov/mulitsa/src/hooks/useAuth.js"],"sourcesContent":["import { useMemo, useState } from \"react\";\nimport { loginUser } from \"../api/user\";\n\nexport default function useAuth() {\n  const [user, setUser] = useState(() => {\n    const userString = localStorage.getItem(\"user\");\n    if (userString) {\n      return JSON.parse(userString);\n    }\n    return null;\n  });\n\n  const value = useMemo(\n    () => ({\n      user,\n      setNewUser: (email, password) => {\n        return loginUser(email, password)\n          .then((newUser) => {\n            setUser(newUser);\n            localStorage.setItem(\"user\", JSON.stringify(newUser));\n          })\n          .catch(() => {\n            setUser(null);\n            localStorage.removeItem(\"user\");\n          });\n      },\n      deleteUser: () => {\n        setUser(null);\n        localStorage.removeItem(\"user\");\n      },\n    }),\n    [user]\n  );\n  return value;\n}\n"],"mappings":"yGAAA,OAASA,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CACzC,OAASC,SAAS,KAAQ,aAAa,CAEvC,cAAe,SAASC,QAAO,EAAG,CAChC,cAAwBF,QAAQ,CAAC,UAAM,CACrC,GAAMG,WAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAIF,UAAU,CAAE,CACd,MAAOG,KAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,CAC/B,CACA,MAAO,KAAI,CACb,CAAC,CAAC,wCANKK,IAAI,eAAEC,OAAO,eAQpB,GAAMC,MAAK,CAAGX,OAAO,CACnB,iBAAO,CACLS,IAAI,CAAJA,IAAI,CACJG,UAAU,CAAE,oBAACC,KAAK,CAAEC,QAAQ,CAAK,CAC/B,MAAOZ,UAAS,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAC9BC,IAAI,CAAC,SAACC,OAAO,CAAK,CACjBN,OAAO,CAACM,OAAO,CAAC,CAChBX,YAAY,CAACY,OAAO,CAAC,MAAM,CAAEV,IAAI,CAACW,SAAS,CAACF,OAAO,CAAC,CAAC,CACvD,CAAC,CAAC,CACDG,KAAK,CAAC,UAAM,CACXT,OAAO,CAAC,IAAI,CAAC,CACbL,YAAY,CAACe,UAAU,CAAC,MAAM,CAAC,CACjC,CAAC,CAAC,CACN,CAAC,CACDC,UAAU,CAAE,qBAAM,CAChBX,OAAO,CAAC,IAAI,CAAC,CACbL,YAAY,CAACe,UAAU,CAAC,MAAM,CAAC,CACjC,CACF,CAAC,EAAC,CACF,CAACX,IAAI,CAAC,CACP,CACD,MAAOE,MAAK,CACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}